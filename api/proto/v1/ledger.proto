syntax = "proto3";

package rgb.ledger.v1;

option go_package = "pkg/pb";

service LedgerService {
  rpc GetBalance (GetBalanceRequest) returns (BalanceResponse) {}

  rpc SubmitTransaction (SubmitTransactionRequest) returns (SubmitTransactionResponse) {}
}

// =============================================================================
// Message Definitions
// =============================================================================

message GetBalanceRequest {
  string address = 1;
}

message BalanceResponse {
  string address = 1;
  uint32 red = 2;
  uint32 green = 3;
  uint32 blue = 4;

  uint64 nonce = 5;
}

message SubmitTransactionRequest {
  bytes raw_payload = 1;

  bytes signature = 2;

  string sender_pub_key = 3;
}

message TransactionPayload {
  string to_address = 1;

  uint32 amount_red = 2;
  uint32 amount_green = 3;
  uint32 amount_blue = 4;

  uint64 nonce = 5;

  int64 timestamp = 6;
}

message SubmitTransactionResponse {
  bool success = 1;

  string error_message = 2;

  string tx_hash = 3;

  BalanceResponse new_balance = 4;
}